----------------------------------------------------------------------------------------------------------------------
      name:  master_thesis
       log:  H:/master_thesis/stata/log/master_thesis_running.log
  log type:  text
 opened on:  13 Jun 2024, 08:41:50

. 
. 
. 
. *** preamble
. {
. 
. /*--------------------------------------------------------
> MASTER THESIS
> -------------
> 
> PUTTING THE GDR'S LEGACY EFFECT UNDER THE MICROSCOPE:
> EASTERN FEMALE STEM PROFESSIONALS IN REUNIFIED GERMANY.
> 
> JOHANNES SCHÜTT, 5574549
> FREE UNIVERSITY OF BERLIN
> 
> M.SC. PUBLIC ECONOMICS
> 
> SUPERVISOR: PROF. NATALIA DANZER, PH.D.
> 
> SUMMER TERM 2024
> 
> --------------------------------------------------------*/
. 
. version 17
. clear all
. set more off, permanently
(set more preference recorded)
. set maxvar 7000

. 
. *** preamble END
. }

. 
. 
. 
. * prepare data
. do ${do}prepare_data.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. use ${v38}ppathl, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. keep if inrange(netto, 10, 19)
(514,453 observations deleted)

. 
. 
. * generate female dummy
. recode sex (2 = 1) (1 = 0) (nonmissing = .), gen(female)
(770609 differences between sex and female)

. 
. label variable female "Female"

. 
. label define female 0 "[0] Male", modify

. label define female 1 "[1] Female", modify

. 
. label values female female

. 
. drop if mi(female)
(23 observations deleted)

. 
. 
. * regressor of interest (years after reunification * female)
. gen dist_reunification = syear - 1990

. label variable dist_reunification "Years after Reunification"

. 
. gen dist_reunification_female = dist_reunification * female

. label variable dist_reunification_female "Years after Reunification $\times$ Female"

. 
. 
. * residence west germany
. merge m:1 hid syear using ${v38}regionl, keep(3) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           770,586  
    -----------------------------------------

. 
. recode bula (1/10 = 1) (11/16 = 0) (nonmissing = .), gen(west)
(746261 differences between bula and west)

. 
. label variable west "Residence in West Germany"

. 
. label define west 0 "[0] Does not reside in West Germany", modify

. label define west 1 "[1] Resides in West Germany", modify

. 
. label values west west

. 
. drop if mi(west)
(4 observations deleted)

. 
. * interaction term
. gen west_female = west * female

. label variable west_female "Residence in West Germany $\times$ Female"

. 
. 
. * eastern origin
. recode loc1989 (1 = 1) (2 = 0) (nonmissing = .), gen(east_origin)
(600487 differences between loc1989 and east_origin)

. 
. label variable east_origin "East German Origin"

. 
. label define east_origin 0 "[0] Does not have an East German Origin", modify

. label define east_origin 1 "[1] Has an East German Origin", modify

. 
. label values east_origin east_origin

. 
. drop if mi(east_origin)
(129,614 observations deleted)

. 
. 
. * stem profession
. merge 1:1 pid syear using ${v38}pl, keep(3) keepusing(p_isco88) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           640,679  
    -----------------------------------------

. 
. recode p_isco88 (1236 2111/2213 3111/3212 = 1) (min/0 = .) (nonmissing = 0), gen(stem)
(640679 differences between p_isco88 and stem)

. 
. label variable stem "STEM Profession"

. 
. label define stem 0 "[0] Does not have a STEM Profession", modify

. label define stem 1 "[1] Has a STEM Profession", modify

. 
. label values stem stem

. 
. drop if mi(stem)
(438,701 observations deleted)

. 
. 
. * age
. gen age = syear - gebjahr

. gen age_2 = age^2

. 
. 
. * partner
. recode partner (1/4 = 1) (0 5 = 0), gen(partner_bin)
(23856 differences between partner and partner_bin)

. label variable partner_bin "Spouse/Life Partner"

. 
. label define partner_bin 0 "[0] Does have a Spouse/Life Partner", modify

. label define partner_bin 1 "[1] Has a Spouse/Life Partner", modify

. 
. label values partner_bin partner_bin

. 
. gen partner_bin_female = partner_bin * female

. label variable partner_bin "Spouse/Life Partner $\times$ Female"

. 
. 
. * household size
. merge m:1 hid syear using ${v38}hbrutto, keep(3) keepusing(hhgr) nogen
(label intid_EN already defined)
(label socurban_EN already defined)
(label bula_ew_EN already defined)
(label sampreg_EN already defined)
(label hpmax_EN already defined)
(label syear_EN already defined)
(label cid_EN already defined)
(label hid_EN already defined)
(label intid already defined)
(label socurban already defined)
(label bula_ew already defined)
(label sampreg already defined)
(label hpmax already defined)
(label syear already defined)
(label cid already defined)
(label hid already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           201,978  
    -----------------------------------------

. 
. gen hhgr_female = hhgr * female

. label variable hhgr "Household Size"

. label variable hhgr_female "Household Size $\times$ Female"

. 
. 
. * save dataset
. compress
  variable syear was long now int
  variable eintritt was float now int
  variable erstbefr was float now int
  variable austritt was float now int
  variable letztbef was float now int
  variable sampreg was float now byte
  variable netto was float now byte
  variable nett1 was float now byte
  variable pop was float now byte
  variable loc1989 was float now byte
  variable locinfo was float now byte
  variable birthregion was float now byte
  variable birthregion_ew was float now byte
  variable arefback was float now byte
  variable arefinfo was float now byte
  variable dist_reunification was float now byte
  variable dist_reunification_female was float now byte
  variable regbez was int now byte
  variable ror96 was int now byte
  variable kkz was int now byte
  variable kkz_rek90 was int now byte
  variable gkz was long now byte
  variable plz was long now byte
  variable nuts3 was int now byte
  variable west_female was float now byte
  variable east_origin was float now byte
  variable stem was int now byte
  variable age was float now byte
  variable age_2 was float now int
  variable partner_bin_female was float now byte
  variable hhgr_female was float now byte
  variable partner was double now byte
  variable casemat was double now long
  variable sexor was double now byte
  variable sexorinfo was double now byte
  variable kkz_rek was double now byte
  variable kr_utmost was double now byte
  variable kr_utmnord was double now byte
  variable kr_uemprate was double now byte
  variable kr_foreigner was double now byte
  variable kr_emprate was double now byte
  variable kr_popdens was double now byte
  variable kr_area was double now byte
  variable kr_population was double now byte
  variable kr_hhinc was double now byte
  variable kr_gdp_pem was double now byte
  variable kr_gdp_pc was double now byte
  variable partner_bin was double now byte
  (38,577,798 bytes saved)

. save ${data}female_stem, replace
file H:/master_thesis/stata/data/female_stem.dta saved

. 
. 
. * state controls
. do ${do}state_controls.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. * population (INKAR: Bevölkerung gesamt)
. import delimited "${data}destatis/state_wide.csv", encoding(utf-8) varnames(1) clear
(23 vars, 16 obs)

. 
. * fill missing data in 1990 with data of 1991
. replace unemprate_1990    = unemprate_1991
variable unemprate_1990 was byte now float
(16 real changes made)

. replace unemp_female_1990 = unemp_female_1991
variable unemp_female_1990 was byte now long
(16 real changes made)

. replace unemp_male_1990   = unemp_male_1991
variable unemp_male_1990 was byte now long
(16 real changes made)

. 
. reshape long unemprate_ unemp_female_ unemp_male_, i(state) j(syear)
(j = 1990 1991 1992 1993 1994 1995 1996)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations               16   ->   112         
Number of variables                  23   ->   6           
j variable (7 values)                     ->   syear
xij variables:
unemprate_1990 unemprate_1991 ... unemprate_1996->unemprate_
unemp_female_1990 unemp_female_1991 ... unemp_female_1996->unemp_female_
unemp_male_1990 unemp_male_1991 ... unemp_male_1996->unemp_male_
-----------------------------------------------------------------------------

. 
. rename unemprate_ unemprate

. rename unemp_female_ unemp_female

. rename unemp_male_ unemp_male

. 
. rename state bula

. drop state_name

. 
. save "${data}state.dta", replace
file H:/master_thesis/stata/data/state.dta saved

. 
end of do-file

. 
. use ${data}female_stem, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. merge m:1 bula syear using ${data}state, keep(3) nogen

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,505  
    -----------------------------------------

. 
. gen unemprate_female = unemprate * female

. label variable unemprate_female "Unemployment Rate $\times$ Female"

. 
. gen share_female_unemp = unemp_female / (unemp_female + unemp_male)

. label variable share_female_unemp "Share of Unemployed Females in all Unemployed (\emph{Bundesland})"

. 
. * save dataset
. compress
  variable phrf0 was double now byte
  (241,535 bytes saved)

. save ${data}female_stem, replace
file H:/master_thesis/stata/data/female_stem.dta saved

. 
end of do-file

. * graphical pre-analysis
. do ${do}graphical_preanalysis.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. use ${data}female_stem, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. 
. collapse (mean) stem (count) pid, by(syear east_origin female)

. 
. * infos on bin sizes for notes
. sum pid

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         pid |         28    1232.321    927.4417        211       3395

. local size_mean = round(r(mean))

. local size_sd   = round(r(sd))

. 
. local fmt_size_mean : di %5.0fc `size_mean'

. local fmt_size_sd   : di %5.0fc `size_sd'

. 
. 
. sum pid if female == 1 & inrange(syear, 1990, 1996)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
         pid |         14    1088.571    743.9094        211       2333

. local size_mean_female = round(r(mean))

. local size_sd_female   = round(r(sd))

. 
. local fmt_size_mean_female : di %5.0fc `size_mean_female'

. local fmt_size_sd_female   : di %3.0fc `size_sd_female'

. 
. twoway (connected stem syear if female == 0 & east_origin == 1, mcolor(gs6) lcolor(gs6) msymbol(O) lpattern(solid)) 
> ///
> ||     (connected stem syear if female == 0 & east_origin == 0, mcolor(gs6) lcolor(gs6) msymbol(Oh) lpattern(dash)) 
> ///
> ||     (connected stem syear if female == 1 & east_origin == 0, mcolor(gs6) lcolor(gs6) msymbol(Sh) lpattern(dash)) 
> ///
> ||     (connected stem syear if female == 1 & east_origin == 1, mcolor(black) lcolor(black) msymbol(S) lpattern(soli
> d)), ///
> xline(1990, lcolor(gray) lpattern(dash)) ///
> xtitle("Year") ///
> ytitle("Avg. Prob. STEM Profession") ///
> ylabel(0.05(0.05)0.2, format(%03.2f)) ///
> legend(label(1 "East Origin, Male") ///
>        label(2 "West Origin, Male") ///
>            label(3 "West Origin, Female") ///
>            label(4 "East Origin, Female") ///
>            order(4 3 1 2)) ///
> note("Avg. Bin Size (Std. Dev.): `fmt_size_mean' (`fmt_size_sd')") ///
> name(trend, replace)

. 
. graph export "${figures}trend.pdf", replace
file H:/master_thesis/stata/figures/trend.pdf saved as PDF format

. 
. 
. * trend, zoomed
. use ${data}female_stem, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. 
. keep if inrange(syear, 1990, 1996)
(0 observations deleted)

. 
. statsby stem=r(mean) lb=r(lb) ub=r(ub), by(syear east_origin female) clear: ci means stem
(running ci on estimation sample)

      Command: ci means stem
         stem: r(mean)
           lb: r(lb)
           ub: r(ub)
           By: syear east_origin female

Statsby groups
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
............................

. 
. twoway (connected stem syear if female == 1 & east_origin == 0, mcolor(gs6) lcolor(gs6) msymbol(Sh) lpattern(dash)) 
> ///
> ||     (connected stem syear if female == 1 & east_origin == 1, mcolor(black) lcolor(black) msymbol(S) lpattern(soli
> d)) ///
> ||     (rcap lb ub syear if female == 1 & east_origin == 0, lcolor(gs6)) ///
> ||     (rcap lb ub syear if female == 1 & east_origin == 1, lcolor(black)), ///
> xtitle("Year") ///
> ytitle("Avg. Prob. STEM Profession") ///
> ylabel(0.05(0.05)0.2, format(%03.2f) nogrid) ///
> legend(label(1 "West Origin, Female") ///
>            label(2 "East Origin, Female") ///
>            order(2 1)) ///
> note("Avg. Bin Size (Std. Dev.): `fmt_size_mean_female' (`fmt_size_sd_female')") ///
> name(trend_zoomed, replace)

. 
. graph export "${figures}trend_zoomed.pdf", replace
file H:/master_thesis/stata/figures/trend_zoomed.pdf saved as PDF format

. 
end of do-file

. * validity analysis
. do ${do}validity.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. use ${data}ZA2644_LVost/ZA2644_data_v1-0-0_dta/ERWERB, clear

. merge m:1 FALLNR using ${data}ZA2644_LVost/ZA2644_data_v1-0-0_dta/LMUTTER, keep(3) nogen keepusing(SEX KOHORTE)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            10,583  
    -----------------------------------------

. 
. * all variables in lower case
. foreach var of varlist * {
  2.      rename `var' `= lower("`var'")'
  3. }

. 
. * drop if case is not part of a cohort
. drop if kohorte == 9
(9 observations deleted)

. 
. * sort data
. sort fallnr spellnr

. 
. * female dummy
. recode sex (2 = 1) (1 = 0) (nonmissing = .), gen(female)
(10574 differences between sex and female)

. 
. label variable female "Female"

. 
. label define female 0 "[0] Male", modify

. label define female 1 "[1] Female", modify

. 
. label values female female

. 
. drop if mi(female)
(0 observations deleted)

. 
. * drop cases with missing occupation
. drop if inlist(f401i3, -1, 1004, 1009)
(962 observations deleted)

. 
. * start of occupation
. gen startocc = bg05403 + 1900

. drop if startocc == 1900 | startocc > 1990
(585 observations deleted)

. label variable startocc "Year of Start of Occupation"

. 
. drop if mi(startocc)
(0 observations deleted)

. 
. * drop if occupation started before 1945
. drop if startocc < 1945
(114 observations deleted)

. 
. * start of occupation (in decades)
. recode startocc (1945/1949 = 1) (1950/1959 = 2) (1960/1969 = 3) ///
>                                 (1970/1979 = 4) (1980/1990 = 5), gen(startocc_cat)
(8913 differences between startocc and startocc_cat)

. 
. label variable startocc_cat "Year of Start of Occupation (categorised)"

. 
. label define startocc_cat 1 "1945--1949", modify

. label define startocc_cat 2 "1950--1959", modify

. label define startocc_cat 3 "1960--1969", modify

. label define startocc_cat 4 "1970--1979", modify

. label define startocc_cat 5 "1980--1990", modify

. 
. label values startocc_cat startocc_cat

. 
. * mark stem profession
. recode f401i3 (11/54 = 1) (81/91 = 1) (nonmissing = 0), gen(stem)
(8913 differences between f401i3 and stem)

. 
. label variable stem "STEM Profession"

. 
. label define stem 0 "[0] Does not have a STEM Profession", modify

. label define stem 1 "[1] Has a STEM Profession", modify

. 
. label values stem stem

. 
. drop if mi(stem)
(0 observations deleted)

. 
. * save dataset
. compress
  variable startocc was float now int
  variable startocc_cat was float now byte
  variable stem was int now byte
  (53,478 bytes saved)

. save ${data}validity, replace
file H:/master_thesis/stata/data/validity.dta saved

. 
. * graphical analysis
. collapse (mean) stem (count) fallnr, by(startocc_cat female) 

. 
. * infos on bin sizes for notes
. sum fallnr

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      fallnr |         10       891.3    340.0683        365       1365

. local size_mean = round(r(mean))

. local size_sd   = round(r(sd))

. 
. local fmt_size_mean : di %3.0fc `size_mean'

. local fmt_size_sd   : di %3.0fc `size_sd'

. 
. use ${data}validity, clear

. 
. statsby stem=r(mean) lb=r(lb) ub=r(ub), by(startocc_cat female) clear: ci means stem
(running ci on estimation sample)

      Command: ci means stem
         stem: r(mean)
           lb: r(lb)
           ub: r(ub)
           By: startocc_cat female

Statsby groups
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..........

. 
. twoway (connected stem startocc_cat if female == 0, mcolor(gs6) lcolor(gs6) msymbol(O) lpattern(solid)) ///
> ||     (connected stem startocc_cat if female == 1, mcolor(black) lcolor(black) msymbol(S) lpattern(solid)) ///
> ||     (rcap lb ub startocc_cat if female == 0, lcolor(gs6)) ///
> ||     (rcap lb ub startocc_cat if female == 1, lcolor(black)), ///
> xtitle("Year of Start of Occupation") ///
> ytitle("Avg. Prob. STEM Profession") ///
> xlabel(1 2 3 4 5, valuelabel) ///
> ylabel(0.05(0.05)0.2, format(%03.2f) nogrid) ///
> legend(label(1 "Male") ///
>        label(2 "Female") ///
>            order(2 1)) ///
> note("Avg. Bin Size (Std. Dev.): `fmt_size_mean' (`fmt_size_sd')") ///
> name(cohorts, replace)

. 
. graph export "${figures}validity.pdf", replace
file H:/master_thesis/stata/figures/validity.pdf saved as PDF format

. 
end of do-file

. * regression analysis
. do ${do}regression_analysis.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. use ${data}female_stem, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. 
. * keep east germans only
. keep if east_origin == 1 & inrange(syear, 1990, 1996)
(19,873 observations deleted)

. drop east_origin

. 
. estimates clear

. 
. local baseline = "dist_reunification female dist_reunification_female"

. local west     = "`baseline' west west_female"

. local hhp      = "`west' partner_bin partner_bin_female hhgr hhgr_female age age_2"

. local states   = "`hhp' share_female_unemp"

. 
. * run model
. foreach ind in baseline west hhp states {
  2.         logit stem ``ind'', vce(cluster hid)
  3.         eststo: margins, dydx(``ind'') post
  4. }

Iteration 0:   log pseudolikelihood = -4387.5599  
Iteration 1:   log pseudolikelihood = -4353.7468  
Iteration 2:   log pseudolikelihood = -4353.1836  
Iteration 3:   log pseudolikelihood = -4353.1834  

Logistic regression                                     Number of obs = 14,632
                                                        Wald chi2(3)  =  33.84
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -4353.1834                       Pseudo R2     = 0.0078

                                             (Std. err. adjusted for 2,363 clusters in hid)
-------------------------------------------------------------------------------------------
                          |               Robust
                     stem | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0103272   .0196094    -0.53   0.598     -.048761    .0281066
                   female |  -.0275448   .1096645    -0.25   0.802    -.2424833    .1873938
dist_reunification_female |  -.1499482   .0349514    -4.29   0.000    -.2184517   -.0814448
                    _cons |  -2.165137    .074717   -28.98   0.000     -2.31158   -2.018695
-------------------------------------------------------------------------------------------

Average marginal effects                                Number of obs = 14,632
Model VCE: Robust

Expression: Pr(stem), predict()
dy/dx wrt:  dist_reunification female dist_reunification_female

-------------------------------------------------------------------------------------------
                          |            Delta-method
                          |      dy/dx   std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0008325   .0015775    -0.53   0.598    -.0039243    .0022594
                   female |  -.0022204   .0088432    -0.25   0.802    -.0195527    .0151119
dist_reunification_female |  -.0120873   .0028014    -4.31   0.000    -.0175779   -.0065967
-------------------------------------------------------------------------------------------
(est1 stored)

Iteration 0:   log pseudolikelihood = -4387.5599  
Iteration 1:   log pseudolikelihood = -4347.6207  
Iteration 2:   log pseudolikelihood = -4345.5551  
Iteration 3:   log pseudolikelihood = -4345.5493  
Iteration 4:   log pseudolikelihood = -4345.5493  

Logistic regression                                     Number of obs = 14,632
                                                        Wald chi2(5)  =  41.28
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -4345.5493                       Pseudo R2     = 0.0096

                                             (Std. err. adjusted for 2,363 clusters in hid)
-------------------------------------------------------------------------------------------
                          |               Robust
                     stem | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0338023   .0211175    -1.60   0.109    -.0751919    .0075873
                   female |  -.0396539   .1090967    -0.36   0.716    -.2534795    .1741718
dist_reunification_female |  -.1248446   .0365416    -3.42   0.001    -.1964649   -.0532243
                     west |   .5892195   .2163856     2.72   0.006     .1651114    1.013328
              west_female |  -.6415991   .3822621    -1.68   0.093    -1.390819    .1076208
                    _cons |  -2.153757   .0742629   -29.00   0.000     -2.29931   -2.008204
-------------------------------------------------------------------------------------------

Average marginal effects                                Number of obs = 14,632
Model VCE: Robust

Expression: Pr(stem), predict()
dy/dx wrt:  dist_reunification female dist_reunification_female west west_female

-------------------------------------------------------------------------------------------
                          |            Delta-method
                          |      dy/dx   std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0027212   .0016889    -1.61   0.107    -.0060315     .000589
                   female |  -.0031923   .0087877    -0.36   0.716     -.020416    .0140313
dist_reunification_female |  -.0100506   .0029194    -3.44   0.001    -.0157724   -.0043287
                     west |    .047435   .0173761     2.73   0.006     .0133785    .0814915
              west_female |  -.0516518   .0309385    -1.67   0.095    -.1122901    .0089865
-------------------------------------------------------------------------------------------
(est2 stored)

Iteration 0:   log pseudolikelihood = -4387.5599  
Iteration 1:   log pseudolikelihood = -4299.6403  
Iteration 2:   log pseudolikelihood = -4295.0584  
Iteration 3:   log pseudolikelihood = -4295.0457  
Iteration 4:   log pseudolikelihood = -4295.0457  

Logistic regression                                     Number of obs = 14,632
                                                        Wald chi2(11) =  88.97
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -4295.0457                       Pseudo R2     = 0.0211

                                             (Std. err. adjusted for 2,363 clusters in hid)
-------------------------------------------------------------------------------------------
                          |               Robust
                     stem | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0333523   .0212997    -1.57   0.117    -.0750989    .0083944
                   female |   .0152849   .3362166     0.05   0.964    -.6436875    .6742573
dist_reunification_female |  -.1264942   .0370679    -3.41   0.001     -.199146   -.0538423
                     west |    .669967   .2209816     3.03   0.002      .236851    1.103083
              west_female |  -.5446639   .3856939    -1.41   0.158     -1.30061    .2112822
              partner_bin |    .363502   .2269862     1.60   0.109    -.0813828    .8083869
       partner_bin_female |  -.5083064   .2714418    -1.87   0.061    -1.040323    .0237098
                     hhgr |   .0066271   .0552501     0.12   0.905    -.1016611    .1149153
              hhgr_female |   .1186465   .0767559     1.55   0.122    -.0317923    .2690853
                      age |   .0881053   .0328742     2.68   0.007     .0236731    .1525375
                    age_2 |  -.0008625   .0004035    -2.14   0.033    -.0016534   -.0000715
                    _cons |  -4.516159   .5940043    -7.60   0.000    -5.680386   -3.351932
-------------------------------------------------------------------------------------------

Average marginal effects                                Number of obs = 14,632
Model VCE: Robust

Expression: Pr(stem), predict()
dy/dx wrt:  dist_reunification female dist_reunification_female west west_female partner_bin partner_bin_female hhgr
            hhgr_female age age_2

-------------------------------------------------------------------------------------------
                          |            Delta-method
                          |      dy/dx   std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0026669   .0016936    -1.57   0.115    -.0059863    .0006524
                   female |   .0012222   .0268812     0.05   0.964     -.051464    .0539085
dist_reunification_female |  -.0101147   .0029415    -3.44   0.001      -.01588   -.0043495
                     west |    .053572   .0176723     3.03   0.002     .0189349    .0882091
              west_female |  -.0435525   .0309507    -1.41   0.159    -.1042147    .0171098
              partner_bin |   .0290664   .0181457     1.60   0.109    -.0064985    .0646313
       partner_bin_female |  -.0406452   .0216436    -1.88   0.060     -.083066    .0017755
                     hhgr |   .0005299   .0044198     0.12   0.905    -.0081328    .0091926
              hhgr_female |   .0094872   .0061543     1.54   0.123     -.002575    .0215494
                      age |   .0070451   .0026767     2.63   0.008     .0017988    .0122913
                    age_2 |   -.000069   .0000327    -2.11   0.035     -.000133   -4.88e-06
-------------------------------------------------------------------------------------------
(est3 stored)

Iteration 0:   log pseudolikelihood = -4387.5599  
Iteration 1:   log pseudolikelihood = -4290.2358  
Iteration 2:   log pseudolikelihood = -4285.2623  
Iteration 3:   log pseudolikelihood = -4285.2476  
Iteration 4:   log pseudolikelihood = -4285.2476  

Logistic regression                                     Number of obs = 14,632
                                                        Wald chi2(12) =  95.73
                                                        Prob > chi2   = 0.0000
Log pseudolikelihood = -4285.2476                       Pseudo R2     = 0.0233

                                             (Std. err. adjusted for 2,363 clusters in hid)
-------------------------------------------------------------------------------------------
                          |               Robust
                     stem | Coefficient  std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0121727   .0225804    -0.54   0.590    -.0564294     .032084
                   female |  -.0043693   .3356911    -0.01   0.990    -.6623119    .6535732
dist_reunification_female |  -.1242696   .0363521    -3.42   0.001    -.1955185   -.0530208
                     west |   .2361928   .2812728     0.84   0.401    -.3150918    .7874774
              west_female |  -.5426949   .3871557    -1.40   0.161    -1.301506    .2161164
              partner_bin |    .369037   .2287406     1.61   0.107    -.0792864    .8173605
       partner_bin_female |   -.505717    .272467    -1.86   0.063    -1.039743    .0283084
                     hhgr |   .0108327   .0550662     0.20   0.844     -.097095    .1187604
              hhgr_female |   .1213376   .0767942     1.58   0.114    -.0291764    .2718515
                      age |   .0860133   .0330256     2.60   0.009     .0212843    .1507424
                    age_2 |  -.0008349    .000405    -2.06   0.039    -.0016287    -.000041
       share_female_unemp |   -2.35285   .9328464    -2.52   0.012    -4.181196   -.5245049
                    _cons |  -3.122538   .8090852    -3.86   0.000    -4.708316    -1.53676
-------------------------------------------------------------------------------------------

Average marginal effects                                Number of obs = 14,632
Model VCE: Robust

Expression: Pr(stem), predict()
dy/dx wrt:  dist_reunification female dist_reunification_female west west_female partner_bin partner_bin_female hhgr
            hhgr_female age age_2 share_female_unemp

-------------------------------------------------------------------------------------------
                          |            Delta-method
                          |      dy/dx   std. err.      z    P>|z|     [95% conf. interval]
--------------------------+----------------------------------------------------------------
       dist_reunification |  -.0009719   .0017999    -0.54   0.589    -.0044996    .0025559
                   female |  -.0003488   .0268019    -0.01   0.990    -.0528796     .052182
dist_reunification_female |  -.0099215   .0028819    -3.44   0.001    -.0155699   -.0042731
                     west |   .0188572    .022469     0.84   0.401    -.0251812    .0628957
              west_female |  -.0433279   .0310202    -1.40   0.162    -.1041264    .0174707
              partner_bin |   .0294633   .0182568     1.61   0.107    -.0063193    .0652459
       partner_bin_female |  -.0403756   .0216897    -1.86   0.063    -.0828866    .0021354
                     hhgr |   .0008649   .0043993     0.20   0.844    -.0077577    .0094874
              hhgr_female |   .0096874   .0061457     1.58   0.115     -.002358    .0217328
                      age |   .0068672   .0026837     2.56   0.011     .0016072    .0121271
                    age_2 |  -.0000667   .0000328    -2.03   0.042    -.0001309   -2.45e-06
       share_female_unemp |  -.1878476    .074288    -2.53   0.011    -.3334495   -.0422458
-------------------------------------------------------------------------------------------
(est4 stored)

. 
. esttab using ${tables}margins.tex, ///
>         keep(dist_reunification female dist_reunification_female west west_female ///
>                  partner_bin partner_bin_female hhgr hhgr_female share_female_unemp) ///
>         b(4) se(4) label nomtitle star(* 0.10 ** 0.05 *** 0.01) booktabs replace
(output written to H:/master_thesis/stata/../latex/tables/margins.tex)

. 
end of do-file

. * eastern female tracking
. do ${do}eastern_female_tracking.do

. ** DO NOT EXECUTE THIS DO-FILE ON ITS OWN, DO MAIN.DO !! **
. 
. use ${data}female_stem, clear
(SOEP-Core, v38.1 (EU Edition), doi:10.5684/soep.core.v38.1eu)

. 
. 
. * keep east german females only
. keep if east_origin == 1 & inrange(syear, 1990, 1996) & female == 1
(27,709 observations deleted)

. drop east_origin

. 
. 
. * most of the east german females had their first interview in 1990
. tab erstbefr

   Jahr der |
     ersten |
 Befragung, |
Netto=10-19 |      Freq.     Percent        Cum.
------------+-----------------------------------
       1990 |      6,124       90.11       90.11
       1991 |        186        2.74       92.85
       1992 |        121        1.78       94.63
       1993 |         70        1.03       95.66
       1994 |        215        3.16       98.82
       1995 |         68        1.00       99.82
       1996 |         12        0.18      100.00
------------+-----------------------------------
      Total |      6,796      100.00

. 
. 
. * only look at the individuals who had their first interview in 1990
. keep if erstbefr == 1990
(672 observations deleted)

. 
. 
. * number of individuals in 1990 for notes
. egen sumpid = count(pid) if syear == 1990
(4,501 missing values generated)

. sum sumpid

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      sumpid |      1,623        1623           0       1623       1623

. local sumpid = r(mean)

. drop sumpid

. 
. egen sumstem = count(pid) if syear == 1990 & stem == 1
(5,946 missing values generated)

. sum sumstem

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     sumstem |        178         178           0        178        178

. local sumstem = r(mean)

. drop sumstem

. 
. local fmt_sumpid : di %5.0fc `sumpid'

. 
. 
. * individuals switches from being occupied in stem to not being occupied in stem
. * individuals switching the other way around get accounted as -1 to get net switches
. gen switch = 0

. bysort pid (syear): replace switch = 1 if stem == 0 & stem[_n-1] == 1
(141 real changes made)

. bysort pid (syear): replace switch = -1 if stem == 1 & stem[_n-1] == 0
(56 real changes made)

. 
. collapse (sum) switch pid, by(syear)

. 
. graph twoway connected switch syear [w = pid], ///
>         xtitle("Year") ///
>         ytitle("Net Switches from STEM to non-STEM") ///
>         ylab(, nogrid) ///
>         text(2.5 1990.2 "N = `fmt_sumpid'" 1.1 1990.2 "thereof `sumstem' in STEM", size(vsmall) placement(ne)) ///
>         name(eastern_female_tracking, replace)
(analytic weights assumed)
(analytic weights assumed)
(analytic weights assumed)

. 
. graph export "${figures}eastern_female_tracking.pdf", replace
file H:/master_thesis/stata/figures/eastern_female_tracking.pdf saved as PDF format

. 
end of do-file

. 
. 
. * erase tempfiles
. erase ${data}female_stem.dta

. 
. * close log file
. log close master_thesis
      name:  master_thesis
       log:  H:/master_thesis/stata/log/master_thesis_running.log
  log type:  text
 closed on:  13 Jun 2024, 08:50:24
----------------------------------------------------------------------------------------------------------------------
